#pragma checksum "C:\Users\user\Desktop\TFM104Camping\FinalProjectFirstTest\FinalProjectFirstTest\Views\Buyer\reservation.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "69cf1f3ec2c5b94c9388e1dc4f5e9f020257ad7c"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Buyer_reservation), @"mvc.1.0.view", @"/Views/Buyer/reservation.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\user\Desktop\TFM104Camping\FinalProjectFirstTest\FinalProjectFirstTest\Views\_ViewImports.cshtml"
using FinalProjectFirstTest;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\user\Desktop\TFM104Camping\FinalProjectFirstTest\FinalProjectFirstTest\Views\_ViewImports.cshtml"
using FinalProjectFirstTest.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"69cf1f3ec2c5b94c9388e1dc4f5e9f020257ad7c", @"/Views/Buyer/reservation.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"26ff9cc218848b295820657762e15fb616568996", @"/Views/_ViewImports.cshtml")]
    public class Views_Buyer_reservation : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.HeadTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper;
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.BodyTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n<!DOCTYPE html>\r\n<html>\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("head", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "69cf1f3ec2c5b94c9388e1dc4f5e9f020257ad7c3373", async() => {
                WriteLiteral(@"
	<style>
		.a {
			background-color: #E0E0E0;
		}

		body {
			background-color: #212121;
		}

		.v-application--wrap {
			background-color: #212121;
		}

		.container a rounded-xl {
			height: 70%;
			width: 70%;
		}

		#app {
			width: 60% !important;
		}
		/*
		.v-picker v-card v-picker--date theme--light {
			width: 1000px;
		}*/
		.v-btn v-btn--has-bg theme--dark v-size--default {
			height: 40px !important;
		}
	</style>
");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.HeadTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_HeadTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("body", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "69cf1f3ec2c5b94c9388e1dc4f5e9f020257ad7c4798", async() => {
                WriteLiteral(@"

	<div id=""mika"" class=""col d-flex justify-content-center "">
		<v-app>
			<template>
				<v-container class=""a rounded-xl"">
					<v-row>
						<v-col cols=""12"" md=""6"">
							<v-text-field v-model=""name""
										  :rules=""nameRules""
										  :counter=""10""
										  label=""姓名""
										  required></v-text-field>
						</v-col>

						<v-col cols=""12"" md=""6"">
							<v-text-field v-model=""phone""
										  :rules=""phoneRules""
										  :counter=""10""
										  label=""電話""
										  required></v-text-field>
						</v-col>
					</v-row>
					<v-row>
						<v-col cols=""12"" md=""6"">
							<div");
                BeginWriteAttribute("class", " class=\"", 1143, "\"", 1151, 0);
                EndWriteAttribute();
                WriteLiteral(" style=\"display:flex;justify-content:center;\">\r\n\t\t\t\t\t\t\t\t<div");
                BeginWriteAttribute("class", " class=\"", 1212, "\"", 1220, 0);
                EndWriteAttribute();
                WriteLiteral(@" style=""width:90%;"">
									<v-date-picker width=""100%"" color=""#616161"" v-model=""dates"" range :allowed-dates=""allowedDates"">
									</v-date-picker>
								</div>
							</div>
						</v-col>
						<v-col cols=""12"" md=""6"">
							<v-text-field v-model=""dateRangeText"" label=""Date range"" prepend-icon=""mdi-calendar"" readonly></v-text-field>
						</v-col>
					</v-row>
					<v-row>
						<v-col cols=""12"" md=""6"">
							<v-text-field v-model=""calDays""
										  label=""天數""
										  required></v-text-field>
						</v-col>
						<v-col cols=""12"" md=""6"">
							<v-text-field v-model=""calPrice""
										  label=""總價""
										  required></v-text-field>
						</v-col>
					</v-row>
					<div style=""display:flex;justify-content:flex-end;"">
						<v-btn v-on:click=""send"" depressed color=""#424242"" dark");
                BeginWriteAttribute("class", " class=\"", 2055, "\"", 2063, 0);
                EndWriteAttribute();
                WriteLiteral(@">
							下一步
							<v-icon>mdi-arrow-right-bold</v-icon>
						</v-btn>
					</div>
				</v-container>
			</template>
			<!--v-container跟v-row都是bootstrap的用法只是Vuetify也有一套Layout方式 -->
			<!-- :allowed-dates的用法是允許哪一天可以選擇 -->
			<div class=""form-row"">
");
                WriteLiteral("\t\t\t</div>\r\n\t\t\t<div class=\"form-row\">\r\n");
                WriteLiteral("\t\t\t</div>\r\n");
                WriteLiteral("\r\n");
                WriteLiteral(@"		</v-app>
	</div>


	<script>
        var v = new Vue({
            el: '#mika',
            vuetify: new Vuetify(),
            data: {
                //------------------------------
                phName: '姓名',
                phTel: '電話號碼',
                reservationData: {
                    name: '',
                    tel: '',
                    //date1: '',
                    //date2: ''
                },
                getRoomIdtoView: [],
                getCalDays: 0,
                dates: [], //放開始,結束日期
                ListString: [],
                totalPrice: 0,
                //-------------------------------
                valid: false,
                name: '',
                phone: '',
                nameRules: [
                    v => !!v || 'Name is required',
                    v => v.length <= 10 || 'Name must be less than 10 characters',
                ],
                phoneRules: [
                    v => !!v || 'Phone is required'");
                WriteLiteral(",\r\n                    v => v.length == 10 || \'Phone must be equal to 10 characters\',\r\n                ],\r\n                email: \'\',\r\n                emailRules: [\r\n                    v => !!v || \'E-mail is required\',\r\n                    v => /.+");
                WriteLiteral(@"@.+/.test(v) || 'E-mail must be valid',
                ],
            },
            methods: {
                checkName: function () {
                    if (this.reservationData.name === '') {
                        this.phName = '不可為空';
                    }
                },
                checkTel: function () {
                    if (this.reservationData.tel === '') {
                        this.phTel = '不可為空';
                    }
                },
                send: function () {
                    var form = document.createElement(""form"");
                    form.method = ""post"";
                    form.action = ""/Bank/SpgatewayPayBill"";

                    var roomId = document.createElement(""input"");
                    roomId.type = ""text"";
                    roomId.name = ""RoomId"";
                    roomId.value = this.getRoomIdtoView.roomId;
                    form.appendChild(roomId);

                    var inpName = document.createElement(""input""");
                WriteLiteral(@");
                    inpName.type = ""text"";
                    inpName.name = ""Name"";
                    inpName.value = this.name;
                    form.appendChild(inpName);

                    var inpTel = document.createElement(""input"");
                    inpTel.type = ""tel"";
                    inpTel.name = ""Tel"";
                    inpTel.value = this.phone;
                    form.appendChild(inpTel);

                    var inpDate1 = document.createElement(""input"");
                    inpDate1.type = ""text"";
                    inpDate1.name = ""CheckInDate"";
                    inpDate1.value = this.dates[0];
                    form.appendChild(inpDate1);

                    var inpDate2 = document.createElement(""input"");
                    inpDate2.type = ""text"";
                    inpDate2.name = ""CheckOutDate"";
                    inpDate2.value = this.dates[1];
                    form.appendChild(inpDate2);

                    var total = document.crea");
                WriteLiteral(@"teElement(""input"");
                    total.type = ""number"";
                    total.name = ""Price"";
                    total.value = this.totalPrice;
                    form.appendChild(total);

                    document.body.appendChild(form);
                    form.submit();
                },
                allowedDates: function (x) {
                    if (new Date(x) < new Date()) {
                        return false;
                    }
                    for (let i = 0; i < this.ListString.length; i++) {

                        if (this.ListString[i] == x) {
                            return false;
                        }
                    }
                    return true;
                },
                // 判斷日期不可為空
                // 判斷不可選到xxDate
            },
            computed: {
                calDays() {
                    var d1 = new Date(this.dates[0]);
                    var d2 = new Date(this.dates[1]);
                    var su");
                WriteLiteral(@"b = (d2.getTime() - d1.getTime()) / (1000 * 3600 * 24);
                    if (sub > 0) {
                        this.getCalDays = sub;
                        return sub;
                    } else if (sub <= 0) {
                        //this.reservationData.date1 = '';
                        //this.reservationData.date2 = '';
                        this.dates = [];
                        alert('請重新填寫');
                    }
                },
                calPrice() {
                    var d1GetDay = new Date(this.dates[0]).getDay(); // 星期幾0-6 // 型態:number
                    var d2GetDay = new Date(this.dates[1]).getDay();

                    var d1Format = new Date(this.dates[0])
                    var d2Format = new Date(this.dates[1])

                    var weekdayP = this.getRoomIdtoView.weekDayPrice; // 型態:number
                    var weekendP = this.getRoomIdtoView.weekendPrice;

                    var temp = d1GetDay; // 星期幾用
                    var xxx = d1");
                WriteLiteral(@"GetDay;  // addDay 算日期用
                    var yyy = d1GetDay + this.getCalDays;
                    var total = 0;
                    while (xxx < yyy) {
                        if (temp > 6) {
                            temp = temp - 7;
                        }
                        if (temp == 0) {
                            total = total + weekendP;
                        } else if (temp == 6) {
                            total = total + weekendP;
                        } else {
                            total = total + weekdayP;
                        }
                        temp = temp + 1; // 星期幾+1
                        xxx = xxx + 1;   // 日期+1
                    }
                    this.totalPrice = total;
                    return total;
                },
                dateRangeText: function () {
                    return this.dates.join(' ~ ');
                }
            },
            mounted: function () {
                var self = this;
    ");
                WriteLiteral(@"            axios.get(""/Buyer/getRoomIdtoView"").then(function (res) {
                    self.getRoomIdtoView = res.data;

                })
                axios.get(""/Buyer/ListString"").then(function (res) {
                    self.ListString = res.data;
                    console.log(res.data);
                })
            }
        })
	</script>
");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.BodyTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_BodyTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n</html>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
